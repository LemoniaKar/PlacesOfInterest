<!--
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
-->

<!DOCTYPE html>
<!--
 *
 * @author lemon
-->
<html>

    <head>
        <title>Places of Interest</title>
        <meta charset="utf-8" /> 
        <meta name="generator" content="Google Web Designer 9.0.2.0915">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" /> <!--leaflet-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.css"/>  <!--leaflet.draw-->
        
        
        <!-- Φόρτωση link αρχείων CSS -->
        <link rel="stylesheet" href="https://github.com/naomap/leaflet-fusesearch/blob/master/src/leaflet.fusesearch.css"/>
        <link rel="stylesheet" href="https://labs.easyblog.it/maps/leaflet-search/src/leaflet-search.css"/>

            
    </head>

    <body>
        <div id="mapid" style="width: 1250px; height: 900px"></div> <!--Μέγεθος Χάρτη -->

        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script> <!-- Προσθήκη leaflet -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.js"></script> <!--leaflet Plugin: Ενσωμάτωση Javascript για το draw toolbar -->
        <script src="https://github.com/naomap/leaflet-fusesearch/edit/master/src/leaflet.fusesearch.js"></script> <!-- search API leaflet -->


        <script> // Javascript
            var map = L.map('mapid').setView([38.014017213643996, 23.705749511718746], 15); //Επιλογή χάρτη με το άνοιγμα browser
            mapLink =
                    '<a href="http://openstreetmap.org">OpenStreetMap</a>'; //link χάρτη
            L.tileLayer(
                    'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                                '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                                'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                        maxZoom: 25
                    }).addTo(map);

             // Αυτόματη Ανεύρεση Τοποθεσίας από τον browser
            //και προσθήκη πινέζας
            map.locate({setView: true, maxZoom: 8});
            function onLocationFound(e) {
                L.marker(e.latlng).addTo(map);
            }
            map.on('locationfound', onLocationFound);

            function onLocationError(e) {
                alert(e.message);
            }
            //Τέλος


            var markersLayer = new L.LayerGroup();	//layer contain searched elements

            map.addLayer(markersLayer);



             //Εισαγωγή πινέζας σε τοποθεσία
            //και εισαγωγή info τοποθεσίας σε popup window
            map.on('click', function (e) {
                var popLocation = e.latlng;
                var popup = L.popup()
                        .setLatLng(popLocation);
                var Location_Info = window.prompt("Pop Up");
                var marker = new L.marker(e.latlng, {draggable: true})
                        .addTo(map).bindPopup(Location_Info)
                        .openPopup();
            });


//Εισαγωγή search bar πάνω δεξιά
            var controlSearch = new L.Control.Search({
                position: 'topright',
                layer: markersLayer,
                initial: false,
                zoom: 12,
                marker: false
            });

            map.addControl(controlSearch);

/*
            ////////////populate map with markers from sample data
            for (i in data) {
                var title = data[i].title, //value searched
                        loc = data[i].loc, //position found
                        marker = new L.Marker(new L.latLng(loc), {title: title});//se property searched
                marker.bindPopup('title: ' + title);
                markersLayer.addLayer(marker);
            }
*/


            // Επιλογή περιοχής με το άνοιγμα του browser
            // Σύμπτυξη συντεταγμένων geojson οι οποίες έχουν εξαχθεί από http://geojson.io/#map=13/38.0106/23.7127 
            //και έχουν συμπτυχθεί μέσω www.removelinebreaks.net 
            var geojson = {"type": "FeatureCollection", "features": [{"type": "Feature", "properties": {}, "geometry": {"type": "Point", "coordinates": [23.705749511718746, 38.014017213643996]}}, {"type": "Feature", "properties": {}, "geometry": {"type": "Polygon", "coordinates": [[[23.67176055908203, 38.039438891821746], [23.659400939941406, 38.004008389202696], [23.690471649169922, 37.98303953134849], [23.733386993408203, 37.958681077955525], [23.763427734375, 37.97776255232763], [23.766174316406246, 38.03294908916503], [23.733558654785156, 38.06228382832852], [23.67176055908203, 38.039438891821746]]]}}]};


            /*
             
             //https://github.com/naomap/leaflet-fusesearch
             var searchCtrl = L.control.fuseSearch();
             searchCtrl.addTo(map);
             
             searchCtrl.indexFeatures(e.latlng.toString());
             
             L.geoJson(data, {
             onEachFeature: function(feature, layer){
             feature.layer = layer;
             }
             });
             */



        </script> 
        <!--telos javascript-->


    </body>
</html>

